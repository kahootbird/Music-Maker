<!DOCTYPE html>
<html lang="en">
  <head>
    <title> Kahootbird's Music App </title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


  </head>
  <body>
 <div class="container-fluid">
   <div class="row content">
     <div class="col-sm-3 sidenav">
       <h4>Kahootbird's Music App</h4>

       <!--
           <script src="Tone.js">
           -->
           <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.4.9/Tone.js">
         //  import * as Tone from 'tone'
       // }, 3000);


           if (Tone.context.state !== 'running') {
                Tone.context.resume();
            }
             //create a synth and connect it to the main output (your speakers)
             setTimeout(1000,doit)
             function doit() {
           //    if (Tone.context.state !== 'running') {
           //   Tone.context.resume();
           console.log("doit")
          }
             console.log("SYNTH")
             const synth = new Tone.Synth().toDestination();

             //play a middle 'C' for the duration of an 8th note
             synth.triggerAttackRelease("C4", "8n");
         }
           </script>
       <script>
       function doit() {
       console.log("DOIT")
       const synth = new Tone.Synth().toDestination();
       synth.triggerAttackRelease("C3", "16n");
       }

       </script>
       </br></br>

       <button id="btn">
         activate audiocontext
       </button>
       <button onclick="doit()">
         play sound
       </button>

       <script>
       console.log("btnpress")
       //document.querySelector("btn").addEventListener('click')
       //document.querySelector('btn')?.addEventListener('click', async () => {
       //await Tone.start()
       console.log('audio is ready')
       //})

       const playButton = document.querySelector('button');
       const AudioContext = window.AudioContext || window.webkitAudioContext;
       const audioContext = new AudioContext();


       playButton.addEventListener('click', function() {
       console.log("PLAYBTN")


           // check if context is in suspended state (autoplay policy)
           if (audioContext.state === 'suspended') {
               audioContext.resume();
           }

           // play or pause track depending on state
           if (this.dataset.playing === 'false') {
               audioElement.play();
               this.dataset.playing = 'true';
           } else if (this.dataset.playing === 'true') {
               audioElement.pause();
               this.dataset.playing = 'false';
           }


         }, false);
        </script>





       <ul class="nav nav-pills nav-stacked">

       </ul><br>
       <div class="input-group">

       </div>
     </div>

     <div class="col-sm-9" style="background-color: #c0c0c0">
     </br></br></br></br></br>
      Buttons Here:
      </br>
      <button onclick=timer_tick()>
      â–¶
      </button>


      <div class="btn-group btn-matrix">
        <button onclick=start_play(1) type="button" class="btn btn-default">Key 1</button>
        <button onclick=start_play(2) type="button" class="btn btn-default">Key 2</button>
        <button onclick=start_play(3) type="button" class="btn btn-default">Key 3</button>
        <button onclick=start_play(4) type="button" class="btn btn-default">Key 4</button>
        <button onclick=start_play(5) type="button" class="btn btn-default">Key 5</button>
        <button onclick=start_play(6) type="button" class="btn btn-default">Key 6</button>
        <button onclick=start_play(7) type="button" class="btn btn-default">Key 7</button>
        <button onclick=start_play(8) type="button" class="btn btn-default">Key 8</button>
        <button onclick=start_play(9) type="button" class="btn btn-default">Key 9</button>
        <button onclick=start_play(10) type="button" class="btn btn-default">Key 10</button>
        <button onclick=start_play(11) type="button" class="btn btn-default">Key 11</button>
        <button onclick=start_play(12) type="button" class="btn btn-default">Key 12</button>
        <button onclick=start_play(13) type="button" class="btn btn-default">Key 13</button>
        <button onclick=start_play(14) type="button" class="btn btn-default">Key 14</button>
      </div>


  <script>
var key_array = [1,2,3]
var seconds
var keyname = "C7"
  function start_play(key)
  {


    console.log(key)
    if (key == 1)
    keyname = "C4"
    if (key == 2)
    keyname = "C5"
    if (key > 2)
    keyname = "C" + key
    if (key > 6)
    {
    key -= 6
    keyname = "B" + key
    }
    const synth = new Tone.Synth().toDestination();
    //play a middle 'C' for the duration of an 8th note
    synth.triggerAttackRelease(keyname, "8n");
  }
  //setInterval()
  function timer_tick()
  {
    //seconds++
    setInterval(play_key,50)
  }
  function play_key()
  {
    var ar_num = 0
    var z = 0
    if (key_array != null)
    {
      for (z = 0; z < key_array.length; z++)
      {
        start_play(key_array[ar_num])
        console.log("TICK " + key_array[ar_num])

      }
    }
  }

  </script>


     </div>
   </div>
 </div>

  </body>
